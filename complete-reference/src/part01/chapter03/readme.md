# Глава 3. Типы данных, переменные и массивы

## Java - строго типизированный язык

* Каждая переменная и выражение имеет конкретный строго определённый тип;
* Все операции присваивания (как явные, так и через параметры методов) проверяются компилятором на соответствие типов.

## Примитивные типы

В Java определены 8 примитивных (простых) типов данных: byte, short, int, long, char, float, double, boolean.

* **Целые числа со знаком**: byte, short, int, long

  | Наименование | Длина в битах | Диапазон допустимых значений                   |
  | ------------ | ------------- | ---------------------------------------------- |
  | byte         | 8             | от -128 до 127                                 |
  | short        | 16            | от -32768 до 32767                             |
  | int          | 32            | от -2147483648 до 2147483647                   |
  | long         | 64            | от -9223372036854775808 до 9223372036854775807 |

* **Символы**: char (в формальной спецификации языка относится к целочисленным типам)

  | Наименование | Длина в битах | Диапазон допустимых значений                   |
  | ------------ | ------------- | ---------------------------------------------- |
  | char         | 16            | от 0 до 65536 (код символа Unicode)            |
  
* **Числа с плавающей точкой** (действительные), в соответствии со стандартом IEEE-754:
  float (одинарной точности), double (двойной точности)

  | Наименование | Длина в битах | Диапазон допустимых значений                   |
  | ------------ | ------------- | ---------------------------------------------- |
  | float        | 32            | от 1.4е-045 до 3.4е+038                        |
  | double       | 64            | от 4.9е-324 до 1.8е+308                        |

* **Логические значения**: boolean

  | Наименование | Допустимые значения |
  | ------------ | ------------------- |
  | boolean      | true, false         |

## Литералы

* **Целочисленные литералы**
  * Десятичные (по основанию 10): int a = 300;
  * Восьмеричные: int b = 07;
    Обозначаются начальным нулём, допустимые значения - от 0 до 7.
  * Шестнадцатеричные: int c = 0x9; int d = 0Xa; int e = 0xFF;
    Обозначаются префиксом '0x' или '0X', допустимые значения - от 0 до 9 и от A до F.
  * Двоичные (начиная с версии JDK 7): int a = 0b0001; int b = 0B1010;
    Обозначаются префиксом '0b' или '0B', допустимые значения - 0 и 1.
  
  По умолчанию целочисленные литералы имеют тип **int**.
  
  Для обозначения литерала типа long в конце значения указывается символ 'l' или 'L':
  long d = 300L; long o = 0777L; long h = 0xFFL;
  
  Начиная с JDK 7 в целочисленных литералах можно указывать один или несколько знаков подчёркивания (кроме начала и 
  конца литерала): int a = 123_456_789; int b = 123__456__789; int c = 0b1010_0010_0110_1111;
  
* **Литералы с плавающей точкой**
  * В стандартной форме записи: <целое число> <**точка**> <дробная часть>, например 3.0;
  * В экспоненциальной форме записи:
    <стандартная форма записи> <**E**> <степень числа 10, на которую надо умножить это число>.
    Для указания экспоненциальной части используется символ '**e**' или '**E**', например: 5.01E10, 314E-02, 3e+100.
  
  По умолчанию литералы с плавающей точкой имеют тип **double**.
  Тип double можно (но не обязательно) указать явно с помощью добавления символа '**d**' или '**D**': double d = 300.0d;
  
  Для обозначения литерала типа float в конце значения указывается символ '**f**' или '**F**': float f = 300.0f;
  
  Шестнадцатеричные литералы с плавающей точкой - 
  <стандартная форма записи> < **P** > <степень числа 2, на которую надо умножить это число>.
  Используется символ '**p**' или '**P**'. Значение после 'P' называется двоичным порядком.
  Например, 0x12.2P2 представляет число 72.5.
  
  Начиная с JDK 7 в литералах с плавающей точкой также можно указывать один или несколько знаков подчёркивания 
  (кроме начала и конца литерала): double d = 123_456.789_100;

* **Логические литералы**

  Логические литералы имеют тип **boolean**. Они имеют только два логических значения: true и false.

* **Символьные литералы**

  Символы в Java - 16-разрядные значения индексов (кодов) символов Unicode. Заключаются в одинарные кавычки: 'a', 'z'.
  Они могут быть преобразованы в целые значения и над ними можно выполнять арифметические операции.
  * Отображаемые символы: 'a', 'z';
  * Управляющие последовательности - после символа обратной косой черты (backslash): '\\'', '\\n'
  
    | Управляющая последовательность | Описание                                |
    | ------------------------------ | --------------------------------------- |
    | \\ddd                          | Восьмеричный символ (ddd)               |
    | \\uxxxx                        | Шестнадцатеричный символ Unicode (xxxx) |
    | \\'                            | Одинарная кавычка                       |
    | \\"                            | Двойная кавычка                         |
    | \\\                            | Обратная косая черта                    |
    | \\r                            | Возврат каретки                         |
    | \\n                            | Новая строка (перевод строки)           |
    | \\f                            | Подача страницы                         |
    | \\t                            | Табуляция                               |
    | \\b                            | Возврат на одну позицию (backspace)     |

* **Строковые литералы**

  Строки в Java - последовательности символов Unicode, заключаемые в двойные кавычки.
  
  Являются **объектами** типа String.
  
  Строки должны начинаться и заканчиваться в одной строке кода.

## Переменные

**Переменная** - основная единица хранения данных в программе.

* Объявление переменной: тип идентификатор [= необязательное начальное значение];
  Переменная должна быть объявлена до использования;
* Динамическая инициализация - инициализация переменной с помощью любого допустимого выражения (а не только константы);
* Область и срок действия переменных

  **Область действия** задаётся блоком кода, заключённым в фигурные скобки:
  * Область действия, определяемая классом;
  * Область действия, определяемая методом.
  
  Переменные, объявленные внутри области действия, недоступны за пределами этой области (но доступны во вложенных 
  областях). Это обеспечивает защиту переменной от изменения извне, составляет основу инкапсуляции.

  **Срок действия**
  
  Срок действия переменной ограничивается её областью действия.
  Переменные создаются при входе в их область действия и уничтожаются при выходе из неё.
  Это значит, что переменная утратит значение сразу при выходе из её области действия.

## Преобразование и приведение типов

* **Преобразование** типов выполняется когда данные одного типа присваиваются переменной другого типа.

  _Автоматическое преобразование типов_ (расширяющее преобразование) выполняется если:
  * оба типа совместимы (целочисленные и с плавающей точкой совместимы, а char и boolean - не совместимы между собой);
  * длина целевого типа больше длины исходного типа.

* **Приведение несовместимых типов**

  Приведение типов - это _явное_ преобразование типов.
  Используются круглые скобки: (целевой тип) значение.
  ```
  int a = 100;
  byte b = (byte) a;
  ```
  Правила приведения типов:
  * Если значение целочисленного типа больше допустимого _диапазона_ целевого типа, то результатом приведения типа будет
    остаток от целочисленного деления (деление по модулю). Этот вид преобразования - _сужаещее преобразование_.
  ```
  int a = 300;
  byte b = (byte) a; // b = 44
  // после приведения типа int к типу byte значение b = 44. Т.к. диапазон допустимых значений типа
  // byte равен 256, а 300 > 256, то b = остаток от деления 300 на 256 = 44.
  ```
  * Если значение с плавающей точкой присваивается переменной целочисленного типа, то выполняется другой вид 
    преобразования - _усечение_ - отбрасывание дробной части
  ```
  double d = 1.23;
  int i = (int) d; // i = 1
  ```

## Автоматическое продвижение типов в выражениях

В выражениях промежуточное значение выражения может выходить за пределы допустимого диапазона значений любого из 
операндов в выражении. Поэтому в Java существует автоматическое продвижение типов.
```
byte b = 50;
b = b * 2;  // ошибка при компиляции
// при умножении на 2 происходит автоматическое продвижение типа byte к типу int,
// а значение типа int не может быть присвоено переменной типа byte.
b = (byte) (b * 2); // решение ошибки - использовать явное приведение типов
```

**Правила продвижения типов в выражениях**:
* Значения типа **byte, short, char** продвигаются к типу **int**;
* Если один из операндов типа **long**, то тип всего выражения продвигается к типу **long**;
* Если один из операндов типа **float**, то тип всего выражения продвигается к типу **float**;
* Если один из операндов типа **double**, то тип всего выражения продвигается к типу **double**.

## Массивы

**Массив** - группа однотипных переменных, для обращения к которым используется общее имя.
Доступ к элементу осуществляется по его индексу. Индекс массива начинается с 0.
В Java можно создавать массивы любого типа и разной размерности.

* Объявление переменной массива: тип имя_переменной[]; или тип[] имя_переменной;
```
int month_days[];
int[] arr1, arr2, arr3;
```
* Резервирование памяти для хранения массива с помощью оператора new (в Java все массивы распределяются динамически).
```
int month_days[];
month_days = new int[12];
// или
int month_days[] = new int[12];
```
* Инициализация массива - список выражений, разделяемый запятыми и заключаемый в фигурные скобки.
В этом случае оператор new не нужен.
```
int month_days[] = { 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };
```

* **Одномерный массив** - список однотипных переменных.

* **Многомерный массив** - массив массивов.
```
int twoDimArr[][] = new int[4][5];
```
